DELIMITER $$;
CREATE AGGREGATE FUNCTION total_sum(x DOUBLE) RETURNS DOUBLE
BEGIN
	DECLARE sum DOUBLE DEFAULT 0;
					DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' RETURN sum;
					LOOP
										FETCH GROUP NEXT ROW;
										SET sum=sum+x;
					END LOOP;
END
$$
DELIMITER ;$$

show create function total_sum;
DROP function total_sum;
